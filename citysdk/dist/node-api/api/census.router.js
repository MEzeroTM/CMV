function decodeAuthHeader(e){var t=e.header("Authorization").split(" "),s=t[1],u=new Buffer(s,"base64");return u.toString().split(":")[0]}function getModuleInstance(e){if(!moduleInstantiated){var t=decodeAuthHeader(e);return census=new CensusModule["default"](t)}return census}var express=require("express"),keyauth=require("./auth.service"),CitySdk=require("../../../dist/node-api/core/citysdk"),CensusModule=require("../../../dist/node-api/modules/census/citysdk.census"),citysdk=new CitySdk["default"],router=express.Router(),moduleInstantiated=!1,census;router.post("/geo",keyauth,function(e,t){getModuleInstance(e).geoRequest(e.body,function(e){t.json(e)})}),router.post("/api",keyauth,function(e,t){getModuleInstance(e).apiRequest(e.body,function(e){t.json(e)})}),router.get("/states",function(e,t){t.json(citysdk.getStates())}),router.get("/state-capitals",function(e,t){t.json(citysdk.getStateCapitals())}),module.exports=router;