var request=require("request"),basicAuth=require("basic-auth");module.exports=function(e,t,r){function u(e){return e.set("WWW-Authenticate","Basic realm=Authorization Required"),e.send(401)}var a=basicAuth(e);if(!a||!a.name)return u(t);var n="http://api.census.gov/data/?key="+a.name;request.get(n,function(e,a){if(e)return u(t);try{return JSON.parse(a.body),r()}catch(n){return u(t)}})};